<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.aomsir.jewixapi.mapper.UserMapper">

    <select id="queryUserByEmail" resultType="com.aomsir.jewixapi.pojo.entity.User">
        SELECT id, uuid, nickname, email, salt, descroption, password, web_site, create_time, update_time, status
        FROM tb_user
        WHERE email = #{email}
    </select>


    <select id="queryUserByUUID" resultType="User">
        SELECT id, uuid, nickname, email, descroption, web_site, create_time, update_time, status
        FROM tb_user
        WHERE uuid = #{uuid}
    </select>

    <select id="queryConfigUser" resultType="com.aomsir.jewixapi.pojo.dto.UserConfigDTO">
        SELECT id,uuid,nickname,web_site
        FROM tb_user
        WHERE id = 10000;
    </select>

    <select id="queryUserCount" resultType="Long">
        SELECT COUNT(id)
        FROM tb_user
        WHERE status = #{status}
        <if test="email != null">
            AND email = #{email}
        </if>
    </select>

    <select id="queryUserListByPage" resultType="User">
        SELECT id, uuid, nickname, email, descroption, web_site, create_time, update_time, status
        FROM tb_user
        WHERE status = #{status}
        <if test="email != null">
            AND email = #{email}
        </if>
        ORDER BY id DESC
        LIMIT #{param.start},#{param.length}
    </select>
</mapper>